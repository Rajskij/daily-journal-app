<html lang="en">
    <%- include('./partial/head.ejs', { pageName: 'Home' }) %>

<body>
    <%- include('./partial/nav.ejs', { page: 'home' })%>
    <form action="/home" method="post">
        <div class="form-group mt-4">
                <label for="mood"><h5>Select User</h5></label>
                <select name="mood" id="moods" class="form-control">
                    <% users.forEach(user => { %>
                        <option value=<%= user.id %>><%= user.name %></option>
                    <% }) %>
                </select>
        </div>
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="mood"><h5>Your mood</h5></label>
                <select name="mood" id="moods" class="form-control">
                    <% moodOptions.forEach(mood => { %>
                        <option value=<%= mood.value %>><%= mood.label %></option>
                    <% }) %>
                </select>
            </div>
            <div class="form-group col-md-4">
                <label for="wether"><h5>Wether</h5></label>
                <select name="wether" id="wether" class="form-control">
                    <% weatherOptions.forEach(wether => { %>
                        <option value=<%= wether.value %>><%= wether.label %></option>
                    <% }) %>
                </select>
            </div>
            <div class="form-group col-md-4">
                <label for="date"><h5>Date</h5></label>
                <input id="date" type="date" name="date" class="form-control">
            </div>
        </div>
        <fieldset>
           <label><h5>Tags</h5></label>
           <div class="row">
             <!-- Create 3 columns -->
             <% for (let col = 0; col < 3; col++) { %>
               <div class="col-lg-4 col-md-4 col-sm-12">
                <%  // Calculate which tags belong to this column
                    const tagsPerCol = Math.ceil(tags.length / 3);
                    const startIdx = col * tagsPerCol;
                    const endIdx = Math.min(startIdx + tagsPerCol, tags.length);
                    
                    // Render each tag in this column
                    for (let i = startIdx; i < endIdx; i++) { 
                      const tag = tags[i];
                %>
                    <div class="form-check">
                      <input class="form-check-input" 
                             type="checkbox" 
                             id="<%= tag.id %>" 
                             name="tags" 
                             value="<%= tag.id %>">
                      <label class="form-check-label" for="<%= tag.id %>">
                        <%= `${tag.name} ${tag.emoji}` %>
                      </label>
                    </div>
                 <% } %>
               </div>
             <% } %>
           </div>
        </fieldset>
        <div class="form-group mt-3">
            <label for="textarea"><h5>Your Note</h5></label>
            <textarea name="note" class="form-control" id="textarea" rows="3"  placeholder="type your note"></textarea>
        </div>
        <button type="submit" class="btn btn-secondary">Submit</button>
    </form>
</body>
</html>